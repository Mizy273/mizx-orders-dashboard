<!DOCTYPE html>
<html>
<head>
  <title>Admin Orders Dashboard</title>
</head>
<body style="font-family:Arial; padding:30px;">

<h2>Admin Dashboard</h2>

<input id="orderId" placeholder="Order ID"><br><br>
<input id="product" placeholder="Product"><br><br>
<input id="qty" placeholder="Qty"><br><br>

<button onclick="addOrder()">Add Order</button>

<hr>

<h3>Orders List</h3>
<ul id="list"></ul>

<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
  import { getFirestore, doc, setDoc, collection, getDocs } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

  const firebaseConfig = {
    apiKey: "AIzaSyBcTwfcZRKs-9z-NyBmwOPaXRAnQM_nh8o",
    authDomain: "mizxart-orders.firebaseapp.com",
    projectId: "mizxart-orders",
  };

  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);

  async function loadOrders() {
    document.getElementById("list").innerHTML = "";
    const snap = await getDocs(collection(db, "orders"));

    snap.forEach((d) => {
      let data = d.data();
      document.getElementById("list").innerHTML += `
        <li>${d.id} - ${data.product} (${data.qty})</li>
      `;
    });
  }

  window.addOrder = async function () {
    let id = document.getElementById("orderId").value;
    let product = document.getElementById("product").value;
    let qty = document.getElementById("qty").value;

    await setDoc(doc(db, "orders", id), {
      product: product,
      qty: Number(qty),
      status: "IN_PRINT"
    });

    alert("Order Added!");
    loadOrders();
  }

  loadOrders();
</script>

</body>
</html>
