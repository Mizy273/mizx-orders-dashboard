<!DOCTYPE html>
<html lang="ms">
<head>
  <meta charset="UTF-8" />
  <title>Mizxart Orders Dashboard</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    body{
      margin:0;
      font-family:system-ui,Segoe UI,Roboto,Arial;
      background:#0b1020;
      color:#e6edf7;
    }
    .wrap{max-width:900px;margin:40px auto;padding:0 20px}
    h1{margin:0 0 10px}
    input,select,button{
      width:100%;
      padding:10px;
      margin:6px 0;
      border-radius:8px;
      border:1px solid #333;
      background:#111a33;
      color:#fff;
      font-size:14px;
    }
    button{
      cursor:pointer;
      background:#8b5cf6;
      border:none;
      font-weight:700;
    }
    table{
      width:100%;
      border-collapse:collapse;
      margin-top:20px;
    }
    th,td{
      border-bottom:1px solid #222;
      padding:10px;
      text-align:left;
      font-size:13px;
    }
    th{color:#9aa7c2}
    .danger{background:#ef4444}
    .row{display:flex;gap:10px}
  </style>
</head>

<body>
<div class="wrap">
  <h1>Orders Dashboard</h1>

  <!-- ADD ORDER -->
  <h3>Add Order</h3>
  <input id="id" placeholder="Order ID (contoh: 12345)">
  <input id="pack" placeholder="Pack (Tray Box)">
  <input id="product" placeholder="Product">
  <input id="qty" type="number" placeholder="Qty">
  <input id="due" type="date">
  <select id="status">
    <option value="IN_PRINT">In Print</option>
    <option value="READY">Ready</option>
    <option value="PACKED">Packed</option>
    <option value="DONE">Done</option>
  </select>
  <button onclick="addOrder()">Add / Update Order</button>

  <!-- TABLE -->
  <table>
    <thead>
      <tr>
        <th>ID</th><th>Product</th><th>Qty</th><th>Status</th><th>Action</th>
      </tr>
    </thead>
    <tbody id="list"></tbody>
  </table>
</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import {
  getFirestore, doc, setDoc, deleteDoc,
  onSnapshot, collection
} from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSyBcTwfcZRKs-9z-NyBmwOPaXRAnQM_nh8o",
  authDomain: "mizxart-orders.firebaseapp.com",
  projectId: "mizxart-orders",
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);
const colRef = collection(db,"orders");

const list = document.getElementById("list");

onSnapshot(colRef,(snap)=>{
  list.innerHTML="";
  snap.forEach(d=>{
    const o=d.data();
    list.innerHTML+=`
      <tr>
        <td>${o.id}</td>
        <td>${o.product}</td>
        <td>${o.qty}</td>
        <td>${o.status}</td>
        <td>
          <button class="danger" onclick="del('${o.id}')">Delete</button>
        </td>
      </tr>
    `;
  });
});

window.addOrder = async ()=>{
  const id=idEl.value.trim();
  if(!id) return alert("Order ID wajib");
  await setDoc(doc(db,"orders",id),{
    id,
    pack:pack.value,
    product:product.value,
    qty:Number(qty.value),
    due:due.value,
    status:status.value
  });
  alert("Saved to Firebase");
};

window.del = async (id)=>{
  if(confirm("Delete order "+id+" ?")){
    await deleteDoc(doc(db,"orders",id));
  }
};

const idEl=id;
</script>
</body>
</html>
